---
layout: post       # 固定值：表示使用“文章详情页”的模板（Jekyll 默认提供）
title: "1.两数之和"  # 你的文章标题（支持中文，用引号包裹）
date: 2024-09-24 20:30:00 +0800  # 文章发布时间（+0800 表示中国时区，避免时间错乱）
categories: 代码    # 文章分类（比如“技术”“旅行”“读书”，可自定义，多个分类用空格分隔，如“技术 Jekyll”）
tags: [力扣, C++]  # 文章标签（比分类更细致，用 [ ] 包裹，逗号分隔，如 [编程, Ruby]）
---

### 两数之和
```
vector<int> twoSum(vector<int>& nums, int target) 
```
这一行是函数定义，定义了twoSum的函数，返回值类型是`vector<int>`,  vector是cpp标准模版库（STL）中的动态数组容器，int是指存储的数据类型是整数类型
函数的参数列表，`vector<int>& nums` ，类型是整数向量
&：引用符号，表示 nums 是通过引用传递的，而不是值传递。
为什么用引用 
避免复制整个数组，提高效率。如果是值传递，会创建一个副本，增加时间和空间开销。

#### 哈希表

```
unordered_map<int, int> hashtable
```
定义一个哈希表 ，C++ 的 unordered_map 是哈希表实现，平均查找时间为 O(1)。
- 键（int）：数组中的数字。
- 值（int）：该数字在数组中的索引。
```
class Solution {
public:
    vector<int> twoSum(vector<int>& nums, int target) {
        unordered_map<int, int> hashtable;
        for (int i = 0; i < nums.size(); ++i){
            auto it = hashtable.find(target - nums[i]);
            if (it != hashtable.end()){
                return {it->second, i};
            }
            hashtable[nums[i]] = i;
        }
        return {};
    }
};
```
在 C++ 中，`unordered_map` 的 `find()` 方法如果**没有找到目标键**，会返回一个特殊的迭代器 ——`hashtable.end()`（可以理解为「哈希表的末尾标记」，不指向任何实际元素）

遍历数组nums，auto：自动推导类型，这里it 是 `unordered_map<int,int>: : iterator`类型

- `unordered_map` 存储的是「键值对（key-value）」，比如你的代码中存储的是 `{数字值: 下标}`
- `it` 是一个迭代器（可以理解为指向哈希表中某个键值对的指针）
- `it->first` 表示这个键值对中的「键（key）」（即存储的数字值）
- `it->second` 表示这个键值对中的「值（value）」（即存储的数字下标）

`hashtable[nums[i]] = i` 这行代码的作用是**将当前遍历到的数字及其下标存入哈希表中**。

##### auto
在 C++ 中，auto 是一个关键字，用于**自动推导变量的类型**。它允许编译器根据变量的初始化表达式自行推断出变量的确切类型，而无需程序员显式指定。

计算补数（complement），就是当前数组与目标的差，如果找到，返回it->second：哈希表中补数的索引

这里hashtable.end()代表没有找到，如果没找到，将当前数字 `nums[i]` 及其索引 i 存入哈希表。
- 语法：hashtable[key] = value，键是 nums[i]，值是 i。
- 这样后续遍历时，可以用它来匹配其他数字。


## 两个for
在 `vector<int>& nums` 中，`&` 表示**引用传递**，这是 C++ 中的一种参数传递方式，主要有以下两个作用：

1. **避免拷贝，提高效率**`vector` 是一个动态数组，如果直接传值（不加 `&`），函数会创建一个原始数组的**副本**（完整复制所有元素）。当数组很大时（比如包含几万个元素），拷贝操作会消耗大量内存和时间。而加 `&` 后，传递的是原始数组的「引用」（可以理解为别名），函数内部操作的就是原始数组本身，不会产生拷贝，效率更高。
    
2. **允许修改原始数组（这里未用到）**
	引用传递的另一个特性是：如果在函数内部修改 `nums`，会直接影响外部的原始数组。不过在「两数之和」问题中，我们只需要读取数组元素，不需要修改，所以这里更主要的作用是第一种 —— 避免不必要的拷贝。
    
如果写成 `vector<int> nums`（不加 `&`），代码逻辑上也能运行，但会做无用的拷贝，影响性能。在力扣这类算法题中，传递引用是更优的做法，也是行业内的常规写法。

`push_back` 是 C++ 标准库中 `vector`（动态数组）的一个基础成员函数，作用是**在容器的末尾添加一个元素**。在刷题时，它是非常常用的函数，建议掌握并记住。

类似的还有 `size()`（获取长度）、`empty()`（判断是否为空）等